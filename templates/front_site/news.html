{% extends "front_site/base.html" %}

{% block content %}
<div class="l-container">
<div class="well">
    <div class='section-header'>News</div>

    <cfquery name="News" datasource="#FDSN#" cachedWithin="#tMin#">
        SELECT newsid,stamp,thenews,subject FROM News
        <cfif IsDefined("URL.newsid") AND IsNumeric(URL.newsid)>
            WHERE newsid = <CFQUERYPARAM value="#URL.newsid#" CFSQLType="CF_SQL_NUMERIC">
        </cfif>
        ORDER BY stamp DESC
        LIMIT 10
    </cfquery>

    <cfoutput query="News">
    <div class="news">
        <h4><a href="news.cfm?newsid=#newsid#">#DateFormat(stamp,"M/DD/YY")# - #subject#</a></h4>
        <p>
        #thenews#
        </p>
    </div>
    </cfoutput>

    <cfif IsDefined("URL.newsid") AND IsNumeric(URL.newsid)>
    <p><a href="news.cfm">View all news</a></p>
    </cfif>

</div>
</div>
{% endblock %}
