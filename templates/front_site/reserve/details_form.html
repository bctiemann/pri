<div id="reservation_details">

    <p class="reservation-info">
    We're glad to have you renting from us! Please give us some information on your needs: the
    date of the rental, the date when you'll be bringing the vehicle back, and any notes or special requests
    (such as whether you'll need the vehicle delivered or whether you'll be picking it up at PRI).
    </p>

    {{ form.errors }}
{#        {{ form }}#}

    <table class="inputform details">
        <tr>
            <td>Vehicle</td>
            <td>
                <input name="vehicle_marketing" type="hidden" value="{{ vehicle.id }}" />
                <input name="vehicle_slug" type="hidden" value="{{ vehicle.slug }}" />
                {{ vehicle.make}} {{ vehicle.model }}
            </td>
        </tr>
        <tr>
            <td>Rental Date</td>
            <td>
                {{ form.out_date }} {{ form.out_date.errors }}
                {{ form.out_time }}
                {% comment %}
                <cfinput name="dateout" value="#Reservation.dateout#" style="width: 120px;" placeholder="MM/DD/YYYY" class="#StructKeyExists(fieldErrors,"dateout") ? 'field-error' : ''#" />
                <select name="dateouttime" class="#StructKeyExists(fieldErrors,"dateouttime") ? 'field-error' : ''#">
                    <option value="07:00" <cfif Reservation.dateouttime IS "07:00">selected</cfif>>7:00 am</option>
                    <option value="07:30" <cfif Reservation.dateouttime IS "07:30">selected</cfif>>7:30 am</option>
                    <option value="08:00" <cfif Reservation.dateouttime IS "08:00">selected</cfif>>8:00 am</option>
                    <option value="08:30" <cfif Reservation.dateouttime IS "08:30">selected</cfif>>8:30 am</option>
                    <option value="09:00" <cfif Reservation.dateouttime IS "09:00">selected</cfif>>9:00 am</option>
                    <option value="09:30" <cfif Reservation.dateouttime IS "09:30">selected</cfif>>9:30 am</option>
                    <option value="10:00" <cfif Reservation.dateouttime IS "10:00">selected</cfif>>10:00 am</option>
                    <option value="10:30" <cfif Reservation.dateouttime IS "10:30">selected</cfif>>10:30 am</option>
                    <option value="11:00" <cfif Reservation.dateouttime IS "11:00">selected</cfif>>11:00 am</option>
                    <option value="11:30" <cfif Reservation.dateouttime IS "11:30">selected</cfif>>11:30 am</option>
                    <option value="12:00" <cfif Reservation.dateouttime IS "12:00">selected</cfif>>12:00 pm</option>
                    <option value="12:30" <cfif Reservation.dateouttime IS "12:30">selected</cfif>>12:30 pm</option>
                    <option value="13:00" <cfif Reservation.dateouttime IS "13:00">selected</cfif>>1:00 pm</option>
                    <option value="13:30" <cfif Reservation.dateouttime IS "13:30">selected</cfif>>1:30 pm</option>
                    <option value="14:00" <cfif Reservation.dateouttime IS "14:00">selected</cfif>>2:00 pm</option>
                    <option value="14:30" <cfif Reservation.dateouttime IS "14:30">selected</cfif>>2:30 pm</option>
                    <option value="15:00" <cfif Reservation.dateouttime IS "15:00">selected</cfif>>3:00 pm</option>
                    <option value="15:30" <cfif Reservation.dateouttime IS "15:30">selected</cfif>>3:30 pm</option>
                    <option value="16:00" <cfif Reservation.dateouttime IS "16:00">selected</cfif>>4:00 pm</option>
                    <option value="16:30" <cfif Reservation.dateouttime IS "16:30">selected</cfif>>4:30 pm</option>
                    <option value="17:00" <cfif Reservation.dateouttime IS "17:00">selected</cfif>>5:00 pm</option>
                    <option value="17:30" <cfif Reservation.dateouttime IS "17:30">selected</cfif>>5:30 pm</option>
                    <option value="18:00" <cfif Reservation.dateouttime IS "18:00">selected</cfif>>6:00 pm</option>
                    <option value="18:30" <cfif Reservation.dateouttime IS "18:30">selected</cfif>>6:30 pm</option>
                    <option value="19:00" <cfif Reservation.dateouttime IS "19:00">selected</cfif>>7:00 pm</option>
                    <option value="19:30" <cfif Reservation.dateouttime IS "19:30">selected</cfif>>7:30 pm</option>
                    <option value="20:00" <cfif Reservation.dateouttime IS "20:00">selected</cfif>>8:00 pm</option>
                    <option value="23:00" <cfif Reservation.dateouttime IS "23:00">selected</cfif>>Other (special)</option>
                </select>
                {% endcomment %}
            </td>
        </tr>
        <tr>
            <td>Return Date</td>
            <td>
                {{ form.back_date }} {{ form.back_date.errors }}
                {{ form.back_time }}
                {% comment %}
                <cfinput name="dateback" value="#Reservation.dateback#" style="width: 120px;" placeholder="MM/DD/YYYY" class="#StructKeyExists(fieldErrors,"dateback") ? 'field-error' : ''#" />
                <cfselect name="datebacktime" class="#StructKeyExists(fieldErrors,"datebacktime") ? 'field-error' : ''#">
                    <option value="07:00" <cfif Reservation.datebacktime IS "07:00">selected</cfif>>7:00 am</option>
                    <option value="07:30" <cfif Reservation.datebacktime IS "07:30">selected</cfif>>7:30 am</option>
                    <option value="08:00" <cfif Reservation.datebacktime IS "08:00">selected</cfif>>8:00 am</option>
                    <option value="08:30" <cfif Reservation.datebacktime IS "08:30">selected</cfif>>8:30 am</option>
                    <option value="09:00" <cfif Reservation.datebacktime IS "09:00">selected</cfif>>9:00 am</option>
                    <option value="09:30" <cfif Reservation.datebacktime IS "09:30">selected</cfif>>9:30 am</option>
                    <option value="10:00" <cfif Reservation.datebacktime IS "10:00">selected</cfif>>10:00 am</option>
                    <option value="10:30" <cfif Reservation.datebacktime IS "10:30">selected</cfif>>10:30 am</option>
                    <option value="11:00" <cfif Reservation.datebacktime IS "11:00">selected</cfif>>11:00 am</option>
                    <option value="11:30" <cfif Reservation.datebacktime IS "11:30">selected</cfif>>11:30 am</option>
                    <option value="12:00" <cfif Reservation.datebacktime IS "12:00">selected</cfif>>12:00 pm</option>
                    <option value="12:30" <cfif Reservation.datebacktime IS "12:30">selected</cfif>>12:30 pm</option>
                    <option value="13:00" <cfif Reservation.datebacktime IS "13:00">selected</cfif>>1:00 pm</option>
                    <option value="13:30" <cfif Reservation.datebacktime IS "13:30">selected</cfif>>1:30 pm</option>
                    <option value="14:00" <cfif Reservation.datebacktime IS "14:00">selected</cfif>>2:00 pm</option>
                    <option value="14:30" <cfif Reservation.datebacktime IS "14:30">selected</cfif>>2:30 pm</option>
                    <option value="15:00" <cfif Reservation.datebacktime IS "15:00">selected</cfif>>3:00 pm</option>
                    <option value="15:30" <cfif Reservation.datebacktime IS "15:30">selected</cfif>>3:30 pm</option>
                    <option value="16:00" <cfif Reservation.datebacktime IS "16:00">selected</cfif>>4:00 pm</option>
                    <option value="16:30" <cfif Reservation.datebacktime IS "16:30">selected</cfif>>4:30 pm</option>
                    <option value="17:00" <cfif Reservation.datebacktime IS "17:00">selected</cfif>>5:00 pm</option>
                    <option value="17:30" <cfif Reservation.datebacktime IS "17:30">selected</cfif>>5:30 pm</option>
                    <option value="18:00" <cfif Reservation.datebacktime IS "18:00">selected</cfif>>6:00 pm</option>
                    <option value="18:30" <cfif Reservation.datebacktime IS "18:30">selected</cfif>>6:30 pm</option>
                    <option value="19:00" <cfif Reservation.datebacktime IS "19:00">selected</cfif>>7:00 pm</option>
                    <option value="19:30" <cfif Reservation.datebacktime IS "19:30">selected</cfif>>7:30 pm</option>
                    <option value="20:00" <cfif Reservation.datebacktime IS "20:00">selected</cfif>>8:00 pm</option>
                    <option value="23:00" <cfif Reservation.datebacktime IS "23:00">selected</cfif>>Other (special)</option>
                </cfselect>
                {% endcomment %}
            </td>
        </tr>
        <tr>
            <td>Number of Drivers</td>
            <td>
                {{ form.drivers }}
                {% comment %}
                <cfselect name="drivers" class="#StructKeyExists(fieldErrors,"drivers") ? 'field-error' : ''#">
                    <option value="1" <cfif Reservation.drivers IS 1>selected</cfif>>1</option>
                    <option value="2" <cfif Reservation.drivers IS 2>selected</cfif>>2</option>
                    <option value="3" <cfif Reservation.drivers IS 3>selected</cfif>>More than 2</option>
                </cfselect>
                {% endcomment %}
            </td>
        </tr>
        <tr>
            <td>Delivery</td>
            <td>
                {{ form.delivery_required }}
                {% comment %}
                <cfselect name="delivery" class="#StructKeyExists(fieldErrors,"delivery") ? 'field-error' : ''#" onchange="toggleDeliveryZip();">
                    <option value="0" <cfif Reservation.delivery IS 0>selected</cfif>>I will be picking up the vehicle at PRI in Ringwood, NJ</option>
                    <option value="1" <cfif Reservation.delivery IS 1>selected</cfif>>I would like the vehicle to be delivered to me</option>
                </cfselect>
                {% endcomment %}
            </td>
        </tr>
        <tr class="delivery-zip">
            <td>Delivery ZIP</td>
            <td>
                {{ form.delivery_zip }}
                {% comment %}
                <cfinput name="deliveryzip" value="#Reservation.deliveryzip#" style="width: 100px;" maxlength="10" class="#StructKeyExists(fieldErrors,"deliveryzip") ? 'field-error' : ''#" />
                {% endcomment %}
            </td>
        </tr>
        <tr class="smallprint">
            <td></td>
            <td>
                <small class="subtext delivery-pricing tooltip" title="pricing">See delivery pricing <span class="ui-icon ui-icon-info"></span></small>
            </td>
        </tr>
        <tr>
            <td>Included Miles</td>
            <td>{{ vehicle.miles_included }} per day</td>
        </tr>
        <tr>
            <td>Extra miles</td>
            <td>
                {{ form.extra_miles }}
                {% comment %}
                <cfselect name="extramiles" class="#StructKeyExists(fieldErrors,"extramiles") ? 'field-error' : ''#">
                    <cfloop from="1" to="#arrayLen(extraMilesPrices)#" index="i">
                        <cfset milesChoice = extraMilesPrices[i]>
                        <option value="#milesChoice.value#" <cfif Reservation.extramiles IS milesChoice.value>selected</cfif>>#milesChoice.label#</option>
                    </cfloop>
                </cfselect>
                {% endcomment %}
                <small class="tooltip" title="You get {{ vehicle.miles_included }} miles per day included with your rental. If you go beyond that amount, additional miles are charged at ${{ vehicle.extra_miles_overage_per_mile }}/mile. If you're planning on covering a lot of distance, buy additional miles now for a discount!">Pre-purchase and save! <span class="ui-icon ui-icon-info"></span></small>
            </td>
        </tr>
        <tr>
            <td>Email</td>
            <td>
                {{ form.email }}
                <cfinput name="email" value="#Reservation.email#" maxlength="255" class="#StructKeyExists(fieldErrors,"email") ? 'field-error' : ''#" />
            </td>
        </tr>
        <tr class="inline-password">
            <td>Password</td>
            <td><cfinput name="inline_pass" type="password" value="#Reservation.inline_pass#" placeholder="(If returning customer)" class="#StructKeyExists(fieldErrors,"login_pass") ? 'field-error' : ''#" /></td>
        </tr>
        <tr>
            <td>Discount/Coupon Code</td>
            <td>
                {{ form.coupon_code }}
                {% comment %}
                <cfinput name="coupon" value="#Reservation.coupon#" maxlength="20" placeholder="(Optional)" class="#StructKeyExists(fieldErrors,"coupon") ? 'field-error' : ''#" />
                {% endcomment %}
            </td>
        </tr>
        <tr>
            <td>Military ID?</td>
            <td>
                {{ form.is_military }}
                <small class="tooltip" title="If you're active duty military, we'll apply a {{ vehicle.military_discount_pct }}% discount."><span class="ui-icon ui-icon-info"></span></small>
            </td>
        </tr>
        <tr>
            <td class="align-top">Notes/Requests</td>
            <td>
                {{ form.notes }}
                {% comment %}
                <cftextarea name="notes" class="#StructKeyExists(fieldErrors,"notes") ? 'field-error' : ''#">#Reservation.notes#</cftextarea>
                {% endcomment %}
            </td>
        </tr>

        {% if form_type == "details" %}
        <cfif NOT IsDefined("IdentityResult") OR NOT IdentityResult.success OR (IsDefined("LoginResult") AND NOT LoginResult.success)>
        <tr class="buttons">
            <td></td>
            <td>
                <button type="submit" name="details_btn" class="btn reserve-rental-details-btn">Continue</button>
                <div class="spinner next-form-spinner details-spinner"></div>
{#                    <button type="submit">Submit</button>#}
            </td>
        </tr>
        </cfif>
        {% endif %}
    </table>

</div>

<div class="exception hidden" id="reservation_details_error">
    <h3>An error occurred</h3>
    <p class="alert-message"></p>
</div>